/* istanbul ignore file */
import commandLineArgs, { OptionDefinition } from "command-line-args";
import { ICommandOptions } from "./interfaces";
import { VulnerabilityScan } from "./vulnerabilityScan";

// v *-server: ..\gradlew dependencies > ..\dependencies.txt
// v rootu: gradlew vulnerabilityScan

// See ICommandOptions for help
const optionDefinitions: OptionDefinition[] = [
  { name: "sourceReport", alias: "s", type: String },
  { name: "outputFile", alias: "o", type: String },
  { name: "outputFileUu", alias: "u", type: String },
  { name: "dependencies", alias: "d", type: String, defaultValue: "" },
  { name: "teamcity", alias: "t", type: Boolean },
  { name: "include", alias: "i", type: String, multiple: true },
  { name: "exclude", alias: "e", type: String, multiple: true },
];
const options = commandLineArgs(optionDefinitions) as ICommandOptions;
options.include = options.include ?? [];
options.exclude = options.exclude ?? [];
new VulnerabilityScan(options, console).run();
